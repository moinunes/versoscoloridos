<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teste de Intersection Observer com AdSense</title>
</head>
<body>

<div id="div_observada1" class="div_observada" style="height: 200px; background-color: lightblue;">
    <p>Div Observada 1</p>
</div>

<div id="div_publicidade_1" class="div_publicidade" style="height: 100px; background-color: lightcoral;">
    <p>Área de Anúncio 1</p>
</div>

<div id="div_observada2" class="div_observada" style="height: 200px; background-color: lightgreen;">
    <p>Div Observada 2</p>
</div>

<div id="div_publicidade_2" class="div_publicidade" style="height: 100px; background-color: lightpink;">
    <p>Área de Anúncio 2</p>
</div>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const divObservadas = document.querySelectorAll('.div_observada');
    const divPublicidades = document.querySelectorAll('.div_publicidade');

    const opcoes = {
        root: null,
        rootMargin: '0px',
        threshold: 0.5
    };

    const observer = new IntersectionObserver(function(entries, observer) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const index = Array.from(divObservadas).indexOf(entry.target);
                carregarAnuncio(divPublicidades[index]);
                observer.unobserve(entry.target);
            }
        });
    }, opcoes);

    divObservadas.forEach(div => observer.observe(div));

    function carregarAnuncio(divPublicidade) {
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2582645504069233",
            enable_page_level_ads: true
        });
    }
});
</script>

</body>
</html>
